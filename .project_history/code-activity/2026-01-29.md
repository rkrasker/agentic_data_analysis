# Code Activity Log: 2026-01-29

**Session:** Codex (GPT-5)
**Focus:** Implement ADR-010 synthetic metadata separation + difficulty prefixes

---

## Summary

Implemented Instruction 010 and ADR-010 schema separation:

1. **Separated core vs synthetic metadata** in synthetic pipeline outputs.
2. **Added ground-truth difficulty module** (`gt_*`) for post-hoc computation.
3. **Prefixed inferred difficulty outputs** and added a CLI writer.
4. **Updated preprocessing adapter** to align with new raw schema and synthetic records passthrough.
5. **Updated tests and documentation** to match new schema and prefixes.

---

## Files Modified

| File | Changes |
|------|---------|
| `src/difficulty/ground_truth.py` | New ground-truth difficulty computation (gt_* outputs) |
| `src/difficulty/__init__.py` | Exported ground-truth difficulty utilities |
| `src/synthetic/pipeline.py` | Split outputs into raw/validation/synthetic_records/synthetic_soldiers + gt_difficulty |
| `src/preprocessing/difficulty/compute.py` | Inferred prefixes + inferred writer CLI |
| `src/preprocessing/difficulty/__init__.py` | Exported inferred writer |
| `src/preprocessing/preprocessing_adapter.py` | Updated raw schema + synthetic_records passthrough |
| `tests/test_difficulty_compute.py` | Updated assertions for inferred_* |
| `tests/test_resolver_validation.py` | Merged synthetic_records for quality tiers |
| `docs/components/synthetic_data_generation/CURRENT.md` | Updated schema + ADR-010 status |
| `docs/components/preprocessing/CURRENT.md` | Updated input/output contract |
| `docs/architecture/CURRENT.md` | Updated artifacts list |
| `DIFFICULTY_MODEL.md` | Noted state_id synthetic-only in canonical |
| `SESSION_STATE.md` | Marked ADR-010 implementation complete |

---

## Tests Run

Not run (not requested).

---

## Notes

- Inferred difficulty outputs retain prior auxiliary columns with new `inferred_` prefixes:
  `inferred_candidate_branches`, `inferred_level_confidences`, `inferred_eliminating_constraints`.
- `gt_difficulty.parquet` is computed post-generation inside the synthetic pipeline.
